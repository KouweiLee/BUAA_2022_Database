# 系统实现报告

## 一、系统整体介绍

### 1. 系统介绍

本次课程设计的超算课程实验平台是综合了选课系统、课程和作业管理系统、评价和交流系统、展示和公告系统，立足于北航超算社团面向全校师生的学习、交流、展示平台。

超算课程实验平台包含用户登录注册、修改密码、修改头像、选择和退选课程、创建和删除主题帖、跟帖删帖、上传图片、查看社团发展信息等，管理员可以添加课程、添加作业、删除课程、删除作业等。

上述内容共包含8个实体，7个联系表，包括对数据库的增删改查操作。后端使用触发器，提升数据库操作的效率。

具体实现层面上，采用Vue框架、Element UI组件库和Vuetify组件库进行页面实现和设计；后端使用Django框架，使用python编写；数据库采用MySQL，并使用ODBC与数据库进行交互，使用pymysql实现对数据库的增删改查、触发器、存储过程的调用等操作。

### 2. 开发环境说明

#### 操作系统及软件版本

windows10 

Python 3.9 

Django 4.1

django-cors-headers 3.13.0

django-rest-framework 0.1.0

djangorestframework 3.14.0

djangorestframework-simplejwt 5.2.2

Node.js 14.17.6 

Vue 3.2.13 

MySQL 8.0 

#### 前端框架及组件库

- Vue 是一套构建用户界面的渐进式框架，它只关注视图层，采用自底向上增量式开发的设计，它的目标是通过仅可能简单的 API 实现响应的数据绑定和组合的视图组件。 Vue 易于学习且方便与第三方库整合。

- Element PLUS 是一套采用 Vue 3.0 作为基础框架实现的组件库，一套为开发者、设计师和产品经理准备的基于 Vue 3.0 的组件库，提供了配套设计资源，帮助网站快速成型。界面美观且方便使用。
- Vuetify3 是一个 Vue UI 库，是一套采用 Vue 3.0 作为基础框架实现的组件库，界面简洁美观且富于科技感，有利于开发效率的提升和思路的拓展。 

#### 后端框架

Django是高水准的Python编程语言驱动的一个开源模型，是一个遵循 MVC 设计模式的框架。Django设计的主要目的是简便、快速的开发数据库驱动的网站。

另外，前后端交互过程中，采用**jwt token**实现操作鉴权和登录状态验证，区分管理员和普通用户的操作权限，同时也保证了只有正在登录的用户才可以访问后端。

为了保证数据的安全性，对用户与管理员的密码使用**SHA256**进行了**加密存储**。

#### 数据库

MySQL是一个关系型数据库管理系统，在本系统中，后端采用**ODBC**与数据库进行交互。具体而言，采用**pymysql**库实现对数据库的增删改查、存储过程的调用等。

## 二、系统结构介绍

### 1. 体系结构介绍

本次作业采用了前后端分离的web开发，前端使用Vue框架、Element UI组件库和Vuetify组件库，后端采用基于Python的Django框架，数据库使用MySQL，前后端之间使用JSON的个数交换数据。整体结构如下：

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\前后端数据库整体交互图-1671798584804-2.png" style="zoom:67%;" />

### 2. 功能结构介绍

本次作业的内容为综合了选课系统、课程和作业管理系统、评价和交流系统、展示和公告系统，立足于北航超算社团面向全校师生的学习、交流和展示平台，涉及的实体包括：用户、主题帖、评论贴、图床、课程、作业、材料、社团发展信息。每个实体涉及的功能如下：

- 用户：注册账号、账号登录、修改账号密码、修改用户头像、修改用户名、查看课程、选课课程、查看已选课程、退选课程、查看作业、提交作业、下载课程材料、上传课程材料、创建主题贴、删除主题帖（仅限本人）、评论主题帖、评论他人评论、删除评论（仅限本人）、添加图床、删除照片、查看社团发展信息、查看社团发展成员、查看社团发展图片、修改课程描述（管理员）、修改课程时间地点（管理员）、修改作业描述（管理员）、修改作业开始结束时间（管理员）、作业打分（管理员）、添加撤销他人管理员身份（管理员）、添加社团发展信息、修改删除社团发展信息（管理员）、增删社团发展成员（管理员）、修改社团发展照片（图片）
- 主题帖：一个主题帖是一个讨论的主题，一个主题帖内部包含多条内容，每一条讨论的内容为一个讨论帖。主题帖展示创建帖子的成员名称、创建时间、主题帖标题和内容以及跟帖数量等信息。主题帖的功能包括：查看主题帖列表、创建主题帖、删除主题帖、进入主题帖查看详细内容等。
- 评论贴：评论贴是主题帖中其他人进行评论的内容，一个评论贴包括被评论者、评论的发出者、评论时间和评论内容。评论贴的功能包括：查看内容、添加跟帖、删除跟帖。
- 图床：图床是用户管理个人图片的地方，图床中将提供图片的链接以便用户在系统中使用这些图片。图床的功能包括：上传图片、删除图片、查看图片、查看图片链接。
- 课程：课程是用户可以进行选择和学习的实体，课程的功能包括：查看课程信息、创建课程、修改课程主要内容、修改课程名称、修改课程时间、修改课程地点、添加课程材料等。
- 作业：作业是课程内部提供的给同学们进行学习和巩固的实体，作业的功能包括：查看作业信息、创建作业、删除作业、修改作业描述、修改作业起始时间、修改作业名称、上传答卷文件、管理员评分、查看平均分等。
- 材料：学习材料是课程内部由管理员设置的学习材料，学习材料的功能有：查看学习材料、上传学习材料、删除学习材料、下载学习材料。
- 社团发展信息：社团发展信息是介绍社团某一阶段发展的主要实体。它的功能包括：查看社团发展信息、新建社团发展信息、修改社团发展信息描述、修改社团发展信息主要图片、删除社团发展信息、修改主要代表人物、查看主要代表人物等。

## 三、数据库基本表的定义

#### 1、创建用户信息表

* 用户信息表包括用户账号，密码，姓名，发帖数，照片，个人简介，是否为管理员等。其中用户账号`username`为主码。

```sql
create table tb_user
(
    username    varchar(100)               not null
        primary key,
    password    varchar(100)               not null,
    name        varchar(50) default '佚名' not null,
    numOfTitles int         default 0      null,
    photo       varchar(100)               null,
    profile     varchar(1000)              null,
    isSuperUser tinyint(1)  default 0      null
);
```

#### 2、创建图床表

* 图床表包括图片id，图片存储位置，以及图片所属用户。其中图片`id`作为主码，图片所属用户`username`作为外码。

```sql
create table tb_pics
(
    id       int auto_increment primary key,
    position varchar(100) null,
    username varchar(100) null,
    constraint tb_pics_ibfk_1
        foreign key (username) references tb_user (username)
);
```

#### 3、创建主题帖表

* 主题帖表包括主题帖ID，标题，内容，发帖时间，发帖用户，贴内评论数。其中，`id`为主码，发帖人`username`为外码，并为其创建级联删除。

```sql
create table dc_title
(
    id        int auto_increment primary key,
    title     varchar(100)   not null,
    content   varchar(10000) null,
    time      datetime       null,
    username  varchar(100)   null,
    numofcoms int default 0  null,
    constraint dc_title_ibfk_1
        foreign key (username) references tb_user (username)
            on delete cascade
);
```

#### 4、创建评论帖表

* 评论贴表中包含评论贴id，内容，发帖时间，发帖用户，被评论人。其中评论帖`id`作为主码，发帖用户`username`为外码。

```sql
create table dc_comment
(
    id               int auto_increment primary key,
    content          varchar(10000) null,
    time             datetime       null,
    username         varchar(100)   null,
    commentatee_name varchar(50)    null,
    constraint dc_comment_ibfk_1
        foreign key (username) references tb_user (username)
            on delete cascade
);
```

#### 5、创建主题帖-评论贴关系表

* 该表包含主题帖id，以及评论帖id，表示某评论贴属于某主题帖。其中评论贴id为主码，同时主题帖id和评论帖id 为外码。

```sql
create table dc_com2title
(
    title_id   int not null,
    comment_id int not null primary key,
    constraint dc_com2title_ibfk_1
        foreign key (title_id) references dc_title (id)
            on delete cascade,
    constraint dc_com2title_ibfk_2
        foreign key (comment_id) references dc_comment (id)
            on delete cascade
);
```

#### 6、创建课程信息表

* 该表包含课程id，课程名称，课程描述，课程平时占比，课程考试占比，上课时间，上课地点等信息。课程`id`为主码。

```sql
create table cl_class
(
    id          int auto_increment primary key,
    name        varchar(100)   not null,
    description varchar(10000) null,
    pingshi     int            null,
    exam        int            null,
    time        varchar(100)   null,
    position    varchar(100)   null
);
```

#### 7、创建作业信息表

* 该表包含作业id，作业名称，作业内容，作业开始时间，作业截止时间，作业的平均分数。

```sql
create table cl_homework
(
    id           int auto_increment
        primary key,
    name         varchar(100)   not null,
    content      varchar(10000) null,
    begin_time   datetime       null,
    end_time     datetime       null,
    averageScore int default 0  null
);
```

#### 8、创建课程-作业关系表

* 该表包含课程与作业的对应情况，即课程id与作业id。

```sql
create table cl_class_homework
(
    class_id    int null,
    homework_id int not null primary key,
    constraint cl_class_homework_ibfk_1
        foreign key (class_id) references cl_class (id)
            on delete cascade,
    constraint cl_class_homework_ibfk_2
        foreign key (homework_id) references cl_homework (id)
            on delete cascade
);
```

#### 9、创建课程-用户关系表

* 该表即为选课表，包含课程id与用户账号。

```sql
create table cl_class_user
(
    username varchar(100) not null,
    class_id int          not null,
    primary key (username, class_id),
    constraint cl_class_user_ibfk_1
        foreign key (username) references tb_user (username)
            on delete cascade,
    constraint cl_class_user_ibfk_2
        foreign key (class_id) references cl_class (id)
            on delete cascade
);
```

#### 10、创建作业-用户关系表

* 该表记录了用户上传作业的相关信息，包括上传者，相应的作业id，分数，最后提交时间，提交文件名。

```sql
create table cl_homework_user
(
    id          int auto_increment
        primary key,
    username    varchar(100) null,
    homework_id int          null,
    score       int          null,
    last_time   datetime     null,
    filename    varchar(500) null,
    constraint onlyone
        unique (username, homework_id),
    constraint cl_homework_user_ibfk_1
        foreign key (username) references tb_user (username)
            on delete cascade,
    constraint cl_homework_user_ibfk_2
        foreign key (homework_id) references cl_homework (id)
            on delete cascade
);
```

#### 11、创建课程附件表

* 该表包括附件id，附件文件名，附件上传时间。

```sql
create table cl_material
(
    id   int auto_increment
        primary key,
    name varchar(100) not null,
    time datetime     null
);
```

#### 12、创建课程-课程附件关系表

* 该表记录了课程与课程附件的对应关系，包括课程id与材料id。

```sql
create table cl_class_material
(
    class_id    int null,
    material_id int not null
        primary key,
    constraint cl_class_material_ibfk_1
        foreign key (class_id) references cl_class (id)
            on delete cascade,
    constraint cl_class_material_ibfk_2
        foreign key (material_id) references cl_material (id)
            on delete cascade
);
```

#### 13、创建社团发展历史信息表

* 该表包括社团信息id，信息所属时间段，该时间段下社团发展概况。

```sql
create table an_develops
(
    id       int auto_increment
        primary key,
    time     varchar(100)   null,
    overview varchar(10000) null
);
```

#### 14、创建社团发展历史信息-成员关系表

* 该表记录了社团在某个发展阶段包含哪些成员，包括社团信息id，成员用户名。

```sql
create table an_develop_member
(
    develop_id int          not null,
    username   varchar(100) not null,
    primary key (develop_id, username),
    constraint an_develop_member_ibfk_1
        foreign key (develop_id) references an_develops (id),
    constraint an_develop_member_ibfk_2
        foreign key (username) references tb_user (username)
);
```

#### 15、创建社团发展历史信息-图片关系表

* 该表记录了社团在某个发展阶段的一些图片记忆，包括图片存储位置，社团信息id。

```sql
create table an_pics
(
    pic_url    varchar(100) not null,
    develop_id int          null,
    constraint an_pics_ibfk_1
        foreign key (develop_id) references an_develops (id)
);
```

## 四、系统重要功能实现方法

### 1、触发器

在本次大作业中，触发器主要被用来更新统计数据，以及实现级联删除。

#### (1) 增加/删除评论的触发器

对象：主题帖的评论数

触发条件：当用户增加评论或删除评论时，就会触发；具体为插入后和删除前。

作用：仅在新增或删除评论时，主题帖内的评论数才会更新，可以方便地进行统计，而不需要多次计算。

```sql
-- 增加评论时, 主题帖评论数+1
delimiter $$
create trigger NumOfComments_update
    after insert
    on dc_com2title
    for each row
begin
    declare tmp int;
    set tmp = new.title_id;
    update dc_title set numofcoms = numofcoms + 1 where id = tmp;
end$$

-- 当删除评论时, 当前主题帖的评论数-1
delimiter $$
create trigger NumOfComments_delete
    before delete
    on dc_comment
    for each row
begin
    update dc_title
    set numofcoms = numofcoms - 1
    where id =
          (select title_id from dc_com2title where comment_id = OLD.id);
end$$
```

#### (2) 增加/删除帖子的触发器

对象：用户发帖数。

触发条件：当用户增加或删除帖子时，就会触发；具体为插入后和删除前。

作用：仅在新增或删除帖子时，用户的发帖数才会更新，可以方便地进行统计，而不需要多次计算。

```sql
-- 用户增加帖子时, 用户发帖数+1
delimiter $$
create trigger user_titles_add
    after insert
    on dc_title
    for each row
begin
    update tb_user set numOfTitles = tb_user.numOfTitles + 1 where username = NEW.username;
end$$

-- 用户删除帖子时, 用户发帖数-1
delimiter $$
create trigger user_titles_delete
    before delete
    on dc_title
    for each row
begin
    update tb_user set numOfTitles = tb_user.numOfTitles - 1 where username = OLD.username;
end$$
```

#### (3) 更新作业平均分的触发器

对象：作业平均分。

触发条件：当用户批改或删除作业时，就会触发；具体为更新后和删除前。

作用：仅在批改或删除作业时，作业平均分才会更新，可以方便地进行统计，而不需要多次计算。如果作业全部没有分数，则平均分置为0。

```sql
-- 有新的作业被批改时, 作业平均分更新
delimiter $$
create trigger homework_ave_update
    after update
    on cl_homework_user
    for each row
begin
    update cl_homework
    set averageScore =
            (select avg(score)
             from cl_homework_user
             where homework_id = NEW.homework_id
               and score is not null
             group by homework_id)
    where id = NEW.homework_id;
end$$

-- 当作业被删除时, 作业平均分更新
delimiter $$
create trigger homework_ave_delete
    after delete
    on cl_homework_user
    for each row
begin
    declare ave int;
    if OLD.score is not null then
        set ave = (select avg(score)
                   from cl_homework_user
                   where homework_id = OLD.homework_id
                     and score is not null
                   group by homework_id);
        if ave is null then
            set ave = 0;
        end if;
        update cl_homework
        set averageScore = ave
        where id = OLD.homework_id;
    end if;
end$$
```

#### (5) 删除级联关系的触发器

对象：删除课程时, 其所有作业和课程附件要全部删除；删除作业时, 所有当前作业下的附件都要删除。

触发条件：课程或作业删除前。

作用：删除主表元素时，其他表里与其有关的元组会被删除，减少冗余。

```sql
-- 删除课程时, 所有作业和附件全部删除
delimiter $$
create trigger course_delete
    before delete
    on cl_class
    for each row
begin
    delete from cl_material where cl_material.id in
        (select material_id from cl_class_material where class_id = OLD.id);
    delete from cl_homework where cl_homework.id in
        (select homework_id from cl_class_homework where class_id = OLD.id);
end$$

-- 删除作业时, 所有当前作业下的附件都要删除
delimiter $$
create trigger homework_delete
    before delete
    on cl_homework
    for each row
begin
    delete from cl_homework_user where homework_id = OLD.id;
end$$
```

### 2、存储过程

在本次大作业中，存储过程与事务相结合，用来处理一些复杂或需要保证原子性的操作。

#### 增加评论的存储过程

过程输入：主题帖的id，评论的内容，评论的发送者，评论的发送时间，被评论者用户名称

过程输出：无

作用：将评论内容、评论时间、评论者用户名和被评论者用户名称插入评论贴实体表，然后从评论表中获取该评论id，将评论id和主题贴id插入评论贴和主题帖联系表中

代码如下：

```mysql
-- 增加评论
delimiter $$
create procedure addcomment(in pTitle_id int, in pContent varchar(10000),
                            in pUsername varchar(100), in pTime datetime, in pCommentatee_name varchar(50))
begin
    declare vComment_id int;
    declare error int default 0;
    declare continue handler for sqlexception set error=1;
    start transaction ;
        insert into dc_comment(content, time, username, commentatee_name) values (pContent, pTime, pUsername, pCommentatee_name);
        set vComment_id = (select MAX(id) from dc_comment);
        insert into dc_com2title(title_id, comment_id) values (pTitle_id, vComment_id);
    if error = 1 then
        rollback ;
    else
        commit ;
    end if ;
end$$
```

#### 增加作业的存储过程

过程输入：课程id，作业名

过程输出：无

作用：首先将作业名插入作业实体表中，随后取得该作业id号，将作业id和对应的课程id插入课程作业联系表中

代码如下：

```mysql
-- 增加作业
delimiter $$
create procedure addwork(in pClass_id int, in pHomeworkName varchar(100))
begin
    declare vhomeworkId int;
    declare error int default 0;
    declare continue handler for sqlexception set error=1;
    start transaction ;
        insert into cl_homework (name) values (pHomeworkName);
        set vhomeworkId = (select MAX(id) from cl_homework);
        insert into cl_class_homework(class_id, homework_id) values (pClass_id, vhomeworkId);
    if error = 1 then
        select error;
        rollback ;
    else
        commit ;
    end if ;
end$$
```

#### 查询针对某用户的所有课程的存储过程

过程输入：需要查询的用户名、Choose表示查询已选的课程还是未选的课程

过程输出：满足要求的课程id和课程名

作用：如果查询某人选择的课程，则将在选课表中出现的该用户名的选课记录输出；如果查询该用户未选择的课程，则将不在选课表中出现的课程id和对应的课程名称输出

代码如下：

```mysql
-- 查询针对某用户的所有课程，pisChoose表示查询该用户已选的课还是未选的课
delimiter $$
create procedure selectAllClasses(in pusername varchar(100), in pisChoose bool)
begin
    if pisChoose = true then
        select id, name from cl_class where id in
                                        (select class_id from cl_class_user where username = pusername);
    else
        select id, name from cl_class where id not in
                                        (select class_id from cl_class_user where username = pusername);
    end if;
end$$
```

#### 检索某课程作业信息的存储过程

过程输入：课程id

过程输出：某课程id下所有的作业id和作业名

作用：在课程和作业联系表中查找该课程id下所有作业id，并将其作业名称取出并输出

代码如下：

```mysql
-- 检索某课程的所有作业信息
delimiter $$
create procedure selectAllWorks(in pClassId int)
    begin
    select id, name from cl_homework where id in
                                           (select homework_id from cl_class_homework where class_id = pClassId);
end$$
```

#### 学生上传作业的存储过程

过程输入：上传作业的用户名，作业id，提交作业时间、作业名

过程输出：无

作用：将用户名、作业id、提交时间和文件名插入作业用户联系表中，如果该用户已经上传了该课程作业，则更新最后提交时间和文件名

代码如下：

```mysql
-- 学生上传作业。使用on duplicate key来实现：若当前表已经存在username和homework_id对应的元组, 则更新该元组; 否则, 则插入该元组。
delimiter $$
create procedure addHomeWorkRecord(in pusername varchar(100), in phomework_id int, in ptime datetime, in pname varchar(500))
begin
    declare error int default 0;
    declare continue handler for sqlexception set error=1;

    start transaction ;
    insert into cl_homework_user(username, homework_id, last_time, filename) values (pusername, phomework_id, ptime, ptime)
    on duplicate key update last_time = ptime, filename = pname;
    if error = 1 then
        rollback ;
    else
        commit ;
    end if ;
end$$
```

#### 增加课程附件的存储过程

过程输入：课程id，附件名称，上传时间

过程输出：无

作用：将课程名称和上传时间插入附件实体表，随后取得上传的附件id，将附件id和课程id插入课程附件联系表中

代码如下：

```mysql
-- 增加课程附件
delimiter $$
create procedure addMaterial(in pClass_id int, in pname varchar(100), in ptime datetime)
begin
    declare vMaterial_id int;
    declare error int default 0;
    declare continue handler for sqlexception set error=1;
    start transaction ;
        insert into cl_material (name, time) values (pname, ptime);
        set vMaterial_id = @@identity; -- 获得上一步插入的id
        insert into cl_class_material(class_id, material_id) values (pClass_id, vMaterial_id);
    if error = 1 then
        select error;
        rollback ;
    else
        commit ;
    end if ;
end$$
```

#### 获取社团发展信息对应的成员信息的存储过程

过程输入：社团发展信息的id

过程输入：对应社团发展信息中所有成员的信息

作用：查找社团发展信息id中所有对应的成员，获取他们的成员名称、成员信息、头像信息

代码如下：

```mysql
-- 获取某社团发展信息对应的所有成员信息
delimiter $$
create procedure selectAllMembers(in pDevelop_id int)
    begin
    select name, profile, photo from tb_user where username in 
    	(select username from an_develop_member where develop_id = pDevelop_id);
end$$
```

## 五、系统实现界面

### 1. 登录、注册及修改密码界面

所有用户都可以通过邮箱注册一个账号之后登录，可以在未登陆时进行密码修改，也可以在登录之后在用户去进行密码修改。

登录界面如下，通过输入用户名和密码，点击登录、之后会进行页面跳转。在这之前会通过数据库对于用户进行验证，当用户不存在、用户密码错误等错误情况导致登陆失败会有提示。 

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223213431422.png" alt="image-20221223213431422" style="zoom:80%;" />

注册页面如下，输入邮箱并且两次输入相同的密码之后，会注册成功，如果邮箱已经存在或者两次输入的密码不一致会提示不一样的错误。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223213505885.png" alt="image-20221223213505885" style="zoom:80%;" />

修改密码页面如下，输入用户名原始密码和修改之后的密码即可，修改成功后会直接跳转到登录界面，如果输入的原始密码不正确，会弹出错误提示。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223213550863.png" alt="image-20221223213550863" style="zoom:80%;" />

### 2. 主页

采用侧边栏和顶栏双侧导引的方式，侧边栏有讨论区、公告区、课程区、个人图床和用户五个选项，点进去之后再通过顶部导航进行各个区内部的界面切换。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223213641078.png" alt="image-20221223213641078" style="zoom:80%;" />

### 3. 讨论区

首先是讨论贴概览界面，学生可以在这里看到所有的讨论贴，简略形式的讨论贴只显示讨论贴的标题部分内容和是否置顶、是否已经结束等信息。与此同时，用户还可以进行简单的操作，点击右下方Like按钮可以进行点赞操作，点击右上方红色按钮可以进行删除操作，逻辑是管理员可以删除所有讨论贴，用户可以删除自己发布的讨论贴。

![image-20221223213728628](D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223213728628.png)

并且可以通过模糊搜索功能输入关键词搜索到自己感兴趣的讨论贴。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214007454.png" alt="image-20221223214007454" style="zoom:80%;" />

用户可以通过点击讨论贴的题目进入相应讨论贴的详细界面

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214028279.png" alt="image-20221223214028279" style="zoom:80%;" />

在这个界面里，用户可以查看讨论贴的详细内容，创作者也可以修改相应内容。用户通过点击右下方的蓝色图标增加评论，并且可以查看所有评论。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214055838.png" alt="image-20221223214055838" style="zoom:80%;" />

### 4. 公告区

公告区主要用来展示北航超算社的社团历史和成员信息，在首页，我们可以看到社团的发展树，每一个结点代表一个发展时期，在每一个节点上会展示这一个发展时期的内容和特点，并且用户也可以通过点击查看成员信息进行这一时期详细成员的查看，管理员可以点击修改按钮，修改具体描述。与此同时管理员还可以点击下方的按钮创建新的社团历史结点。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214141753.png" alt="image-20221223214141753" style="zoom:80%;" />

成员信息界面如图所示，上方会滚动展示所有成员的照片，下方会分别展示每一个成员的信息，用户可以点击个人介绍查看该成员的详细信息。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214200088.png" alt="image-20221223214200088" style="zoom:80%;" />

### 5. 课程区

**课程列表界面**

用户进入课程区会首先进入这个界面，在这个界面里用户可以看到所有开设的课程的名称、是否已选等信息，并且可以进行选课退课操作。除此之外，当课程数目较多时，用户可以通过右上角的搜索框进行搜索。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214239467.png" alt="image-20221223214239467" style="zoom:80%;" />

**课程界面**

点击课程标题，会进入每一个课程的详细界面，这个界面，有课程描述、作业列表、课程管理和课程附件四个界面。

课程描述界面主要展示了该课程的上课时间地点、考评方式和课程主要内容。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214309858.png" alt="image-20221223214309858" style="zoom:80%;" />

课程管理界面只面向课程管理员开放，这里可以修改课程描述界面中的相关信息。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214327110.png" alt="image-20221223214327110" style="zoom:80%;" />

课程附件区只有管理员可以上传和删除文件，学生只能下载文件。这里也实现了搜索功能。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214339760.png" alt="image-20221223214339760" style="zoom:80%;" />

查看一个课程的作业作业列表界面，这里可以看到所有作业的名称和平均分，当作业数目较多时，用户可以通过右上角的搜索框进行搜索。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214354532.png" alt="image-20221223214354532" style="zoom:80%;" />

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214409691.png" alt="image-20221223214409691" style="zoom:80%;" />

**作业界面**

点击作业的标题，会进入作业的详细界面，这个界面有作业描述、作业管理和作业提交三个部分。作业描述界面与课程描述界面类似，展示了作业的标题，开始结束时间和具体内容等信息。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214432028.png" alt="image-20221223214432028" style="zoom:80%;" />

作业管理界面方便管理员修改作业描述相关内容。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214453966.png" alt="image-20221223214453966" style="zoom:80%;" />

作业提交情况有用户和管理员两个版本，管理员版本可以进行下载附件、删除附件、进行评分等操作，并且可以查看系统平均分。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214514763.png" alt="image-20221223214514763" style="zoom:80%;" />

用户版本只能查看到提交的相关信息和分数相关信息，进行作业附件的上传。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214555669.png" alt="image-20221223214555669" style="zoom:80%;" />

### 6. 图床区

这个区域设计的目的是为了让用户把自己可能用到的所有图片统一上传，后端统一存储，这样就可以在其他分区，比如公告区的个人信息展示、头像的设置等，直接使用而不再上传。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214643085.png" alt="image-20221223214643085" style="zoom:80%;" />

### 7. 用户区

用户区，顾名思义，展示了的个人信息，同时用户还可以在这里修改自己的姓名、图像、密码，与此同时管理员也可以在这里设置其他成员为管理员。

<img src="D:\zhang_kg\BUAA_undergraduate\TyporaImage\image-20221223214707162.png" alt="image-20221223214707162" style="zoom:80%;" />

## 六、总结

经过一个学期的合作开发，小组成员都收获颇丰。以下是小组成员对数据库大作业的总结和感想。

**李国玮：**

在本次大作业中，我主要负责后端的架构设计与实施以及数据库表、存储过程、触发器等设计和实施。我总体的收获有：

1. 熟悉了Django框架的逻辑和使用，相比之前用过的SpringBoot，感觉Django更友好、轻量。另外也熟练掌握了通过pymysql与数据库进行连接操作的方法，构建了`SqlHelper`工具类，提供增删改查、调用存储过程等函数接口，也可以为以后的数据库系统项目所使用。
2. 熟练掌握了SQL基本语句，存储过程、触发器等高级用法。整个项目我采用DataGrip作为数据库实现的IDE工具，相比传统命令行的方式更加简单、易操作，降低开发难度，也提升了我的开发体验。
3. 和队友探索出了一条前后端分离开发的系统流程。我们最初两方由于url定义、数据传输格式没有协调好，浪费了一些时间。发现问题之后，我们设计了一套开发流程：首先按照需求讨论并设计好ER图，这样前后端可传输的数据内容就可以限定在ER图中，避免前端想要的数据后端没有；之后将整个系统分为多个功能模块，如课程区、公告区等，每做一个模块前，由后端提供各操作的url以及数据传输格式及内容，交由前端进行审阅并修改，确认无误后双方分离开发，各自开发完成后进行数据库交互。这样一套流程我们基本贯穿了整个任务二的开发过程，实践效果很好。
4. 积累了团队合作经验。我们的项目保存在github上，这锻炼了我们用Git管理项目的能力；多沟通，就少白干，是我们的经验教训。

总体而言，数据库这门课给我的印象很好，也让我的能力有了很大的提升。再次感谢老师和诸位助教一个学期的帮助和陪伴！

**李佳禄：**

在我的数据库作业中，我们完成了一个超算的教学平台的开发，总的来说，完成度还是高的，但是也有很多不足。这一次我采用了先开发框架的方式，感觉相对来说思路更清晰了，开发效率提高了。实现一个更大的项目，对自己的技术水平提出了更高的要求，也逼迫着自己去学更多的东西，思考更多的原理性的东西。与此同时，和两位队友的合作中也意识到了一个集体一定需要一个共同的目标，否则就会做很多无用功。这一次前端没有完全的开发好，主要是时间不够用了，前松后紧。疫情带来的影响确实是主要原因，除此之外，自己确实也没有在一开始开发的时候去思考后续文档的撰写和最后的提交，没有把开发一个可用产品放到心中。导致有一些开发没有步步为营，最后返工的现象也是很多的。总结一下，这次开发，让我学到了很多东西，积累了很多经验，两位队友也是认真负责的，承担了很大的工作量，这是一次相对成功的开发。

**张凯歌：**

本学期大作业中我们小组合作完成了一个北航超算实验课程平台，我在其中主要负责前端开发。在学期初，我是一个完全不懂HTML、CSS、JS、Vue的菜鸟，虽然网上资料很多，但是不清楚完成课程作业需要什么技术、需要学到什么程度、学习周期多长等等问题。在实操时常常需要不断修正系统报的错误，不断学习新技术，这让我在项目之初吃尽了苦头，好在队友帮助和鼓励了我，给了我时间学习前端相关技术来后续更好的完成大作业。在开发的中后期，我将工作的重心转向了系统页面的美化，进行了系统的页面设计，并针对部分页面进行结构和样式的美化，这段时间主要在和CSS“斗智斗勇”，对于我来说是一段痛苦而又美好的回忆。一方面因为各种问题不断产生，另一方面看到自己设计的页面最终展示出来，这种编写程序的感觉和普通的编写C语言或者Java完全不同。

在和团队的合作上，我们也走过很多弯路，最初的沟通效果不太好，但是经过不断的调整和磨合，我们的沟通方法得到了调整，沟通效率得到了改善。但是缺点是后来因为疫情的原因，大家又从线下沟通转为了线上沟通。

如今此次大作业已经结束了这次大作业给我留下了比较深刻的印象，让我的编程开发之路上受益无穷。感谢组员们一个学期的付出，感谢助教老师一个学期中在开发期间对于我们小组的帮助！